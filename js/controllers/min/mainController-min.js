!function($){angular.module("rakugaki").controller("MainController",["$rootScope","$scope","$timeout","$state","$stateParams",function(n,i,e,o,t){i.loaded=!1,i.slides=[{name:"Welcome",state:"welcome",index:0},{name:"Springtide",state:"springtide",index:1},{name:"Shiro",state:"shiro",index:2},{name:"Kcalb",state:"kcalb",index:3},{name:"Yabu no Naka",state:"yabu",index:4},{name:"About",state:"about",index:5}],i.currentSlide=0,i.numSlides=i.slides.length,i.selector={},i.transitionAnimation="init",i.swipeDisabled=!1,i.keyDisabled=!1,i.inTransition=!1,i.modalShown=!1,i.sidebarShown=!1,i.infoWindowShown=!1,i.slideIndexShown=!1,i.safeApply=function(n,i){var e=this.$root.$$phase;"$apply"==e||"$digest"==e?n&&"function"==typeof n&&n():(this.$apply(n),i&&i())},i.gotoSlide=function(n){if(!i.modalShown&&!i.inTransition){if(o.$current.name==n)return i.closeInfoWindow(),void i.closePopup(event);i.inTransition=!0,i.closeInfoWindow(),i.closePopup(event),i.safeApply(function(){"init"!=i.transitionAnimation&&(i.transitionAnimation="init")}),e(function(){o.go(n)},320)}},i.nextSlide=function(){i.modalShown||i.inTransition||(i.inTransition=!0,i.closeInfoWindow(),i.safeApply(function(){"next"!=i.transitionAnimation&&(i.transitionAnimation="next")}),i.currentSlide===i.slides.length-1?i.currentSlide=0:i.currentSlide++,e(function(){o.go(i.slides[i.currentSlide].state)},100))},i.prevSlide=function(){i.modalShown||i.inTransition||(i.inTransition=!0,i.closeInfoWindow(),i.safeApply(function(){"prev"!=i.transitionAnimation&&(i.transitionAnimation="prev")}),0===i.currentSlide?i.currentSlide=i.slides.length-1:i.currentSlide--,e(function(){o.go(i.slides[i.currentSlide].state)},100))},i.initSelector=function(n){i.selector={container:$("#st-container"),sidebarTrigger:$(".nav-trigger")},n&&n()},i.openSidebar=function(n){n.stopPropagation(),n.preventDefault(),i.selector.sidebarTrigger.fadeOut(),i.selector.container.className="st-container",e(function(){i.sidebarShown=!0},25)},i.closePopup=function(n){n.stopPropagation(),i.sidebarShown&&(i.sidebarShown=!1,e(function(){i.selector.sidebarTrigger.fadeIn()},500)),i.slideIndexShown&&(i.slideIndexShown=!1,$(".slide-index").fadeOut())},i.prenventPropagation=function(n){n.stopPropagation()},i.openInfoWindow=function(){i.infoWindowShown=!0,$("#info-"+i.slides[i.currentSlide].state).addClass("show"),i.slideIndexShown=!1,$(".slide-index").fadeOut()},i.closeInfoWindow=function(){i.infoWindowShown=!1,$(".works-info").removeClass("show")},i.onClickEvents=function(){$(".close-info-window").on("click",function(){i.closeInfoWindow()})},i.tapAnime=function(n,i){$(".plot").css("visibility","visible");var e=5;$(".plot").css("width","30px"),$(".plot").css("height","30px"),$(".plot").css("left",n-15+"px"),$(".plot").css("top",i-15+"px"),$(".plot").css({opacity:.3}),$(".plot").animate({opacity:0,height:"40px",width:"40px",left:"-="+e+"px",top:"-="+e+"px"},300,function(){$(".plot").css("visibility","hidden")})},i.initTapAnime=function(){$(".st-pusher, .trigger, .md-trigger, .md-modal").on("click",function(n){i.tapAnime(n.pageX,n.pageY)})},i.openSlideIndex=function(n){n.stopPropagation(),i.slideIndexShown=!0,$(".slide-index").fadeIn(),i.closeInfoWindow()},i.initPerfectScrollbar=function(){$(".works-info-content-wrapper, .slide-index").perfectScrollbar()},i.key=function(n){37==n.keyCode?i.prevSlide():39==n.keyCode&&i.nextSlide()},n.$on("$stateChangeSuccess",function(n,e,t){i.currentSlide=o.current.data.index}),i.init=function(){e(function(){i.initSelector(function(){i.initTapAnime(),i.initPerfectScrollbar(),i.onClickEvents(),i.loaded=!0})},1)},i.init()}])}(jQuery,angular);